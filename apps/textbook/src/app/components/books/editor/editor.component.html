<header class="editor-header">
    <div class="breadcrumb">
        <div class="breadcrumb-item text-gray-500">
            <span class="material-symbols-outlined">folder_open</span>
            <span>{{ bookName }}</span>
        </div>
        <span class="text-gray-700">/</span>
        <div class="breadcrumb-item text-gray-300 font-medium">
            <span class="material-symbols-outlined">article</span>
            <span>{{ pageTitle }}</span>
        </div>
    </div>
    <div class="header-actions">
          <button 
            class="btn-icon-header" 
            title="Favorite" 
            (click)="toggleFavorite()">
            <span 
                class="material-symbols-outlined"
                [class.icon-filled]="currentPage?.is_favorite">
                star
            </span>
          </button>
    </div>
</header>

<div class="editor-content">
    <!-- Empty State -->
    <div *ngIf="!currentPage" class="empty-state">
        <span class="material-symbols-outlined empty-icon">description</span>
        <h2 class="empty-title">No Page Selected</h2>
        <p class="empty-message">Select a page from the sidebar or create a new one to start editing.</p>
    </div>

    <!-- Content (when page selected) -->
    <div *ngIf="currentPage" class="page-content">
        <!-- Floating Toolbar -->
        <div class="floating-toolbar">
            <!-- Text Formatting -->
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('bold')"
                (click)="formatText('bold')" 
                title="Bold (Ctrl+B)">
                <span class="material-symbols-outlined">format_bold</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('italic')"
                (click)="formatText('italic')" 
                title="Italic (Ctrl+I)">
                <span class="material-symbols-outlined">format_italic</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('underline')"
                (click)="formatText('underline')" 
                title="Underline (Ctrl+U)">
                <span class="material-symbols-outlined">format_underlined</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('strikethrough')"
                (click)="formatText('strikethrough')" 
                title="Strikethrough">
                <span class="material-symbols-outlined">strikethrough_s</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('highlight')"
                (click)="formatText('highlight')" 
                title="Highlight">
                <span class="material-symbols-outlined">ink_highlighter</span>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Headings -->
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('h1')"
                (click)="formatText('h1')" 
                title="Heading 1">
                <span class="toolbar-text">H1</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('h2')"
                (click)="formatText('h2')" 
                title="Heading 2">
                <span class="toolbar-text">H2</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('h3')"
                (click)="formatText('h3')" 
                title="Heading 3">
                <span class="toolbar-text">H3</span>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Lists -->
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('bulletList')"
                (click)="formatText('bulletList')" 
                title="Bullet List">
                <span class="material-symbols-outlined">format_list_bulleted</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('orderedList')"
                (click)="formatText('orderedList')" 
                title="Numbered List">
                <span class="material-symbols-outlined">format_list_numbered</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('taskList')"
                (click)="formatText('taskList')" 
                title="Task List">
                <span class="material-symbols-outlined">check_box</span>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Alignment -->
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('alignLeft')"
                (click)="formatText('alignLeft')" 
                title="Align Left">
                <span class="material-symbols-outlined">format_align_left</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('alignCenter')"
                (click)="formatText('alignCenter')" 
                title="Align Center">
                <span class="material-symbols-outlined">format_align_center</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('alignRight')"
                (click)="formatText('alignRight')" 
                title="Align Right">
                <span class="material-symbols-outlined">format_align_right</span>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Code & Quote -->
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('code')"
                (click)="formatText('code')" 
                title="Inline Code">
                <span class="material-symbols-outlined">code</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('codeBlock')"
                (click)="formatText('codeBlock')" 
                title="Code Block">
                <span class="material-symbols-outlined">code_blocks</span>
            </button>
            <button 
                class="toolbar-btn" 
                [class.active]="isActive('blockquote')"
                (click)="formatText('blockquote')" 
                title="Quote">
                <span class="material-symbols-outlined">format_quote</span>
            </button>
            
            <div class="toolbar-divider"></div>
            
            <!-- Links & Images -->
            <button 
                class="toolbar-btn" 
                [class.active]="editor.isActive('link')"
                (click)="addLink()" 
                title="Add Link">
                <span class="material-symbols-outlined">link</span>
            </button>
            <button 
                class="toolbar-btn" 
                (click)="addImage()" 
                title="Add Image">
                <span class="material-symbols-outlined">image</span>
            </button>
            <button 
                class="toolbar-btn" 
                (click)="formatText('horizontalRule')" 
                title="Horizontal Line">
                <span class="material-symbols-outlined">horizontal_rule</span>
            </button>
        </div>

    <div class="page-container">
        <!-- Cover Image -->
        <div class="cover-image group">
            <div class="cover-overlay">
                <button class="btn-change-cover">Change Cover</button>
            </div>
        </div>

        <div class="editor-blocks">
            <!-- Page Title -->
            <div class="title-block">
                <input 
                    class="page-title-input" 
                    type="text" 
                    [(ngModel)]="pageTitle" 
                    (blur)="savePageTitle()"
                    placeholder="Untitled" />
                <div class="page-meta">
                    <span class="meta-item">
                        <span class="material-symbols-outlined">calendar_today</span> 
                        {{ createdDate }}
                    </span>
                    <span class="meta-item">
                        <span class="material-symbols-outlined">timer</span> 
                        {{ readTime }}
                    </span>
                    <div class="tags">
                        <span class="tag" *ngFor="let tag of tags">{{ tag }}</span>
                    </div>
                </div>
            </div>

            <!-- Tiptap Editor -->
            <div class="tiptap-wrapper">
                <tiptap-editor 
                    *ngIf="editor"
                    [editor]="editor"
                    [(ngModel)]="editorContent">
                </tiptap-editor>
            </div>
        </div>
    </div>
    </div>
</div>