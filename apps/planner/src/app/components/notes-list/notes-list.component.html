<div class="notes-container">
    <!-- Top Navigation -->
    <header class="top-nav">
        <div class="nav-brand">
            <div class="brand-icon">
                <i class="bi bi-journal-richtext"></i>
            </div>
            <span class="brand-text">Str<span class="brand-accent">ata</span></span>
        </div>
        <nav class="nav-links">
            <a routerLink="/notes" class="nav-link active">
                <i class="bi bi-journal-text"></i> Notes </a>
            <a routerLink="/tasks" class="nav-link">
                <i class="bi bi-kanban"></i> Tasks </a>
        </nav>
        <div class="nav-actions">
            <button class="nav-btn nav-btn-primary" (click)="openCreateModal()">
                <i class="bi bi-plus-lg"></i> New Note </button>
        </div>
    </header>
    <!-- Notes Content -->
    <main class="notes-main">
        <div class="notes-grid"> @for (note of notes; track note.id) { <div class="note-card" [class.marked]="note.isMarked">
                <button class="mark-btn" [class.active]="note.isMarked" (click)="$event.stopPropagation(); toggleMark(note)" title="Mark as important">
                    <i class="bi" [class.bi-star-fill]="note.isMarked" [class.bi-star]="!note.isMarked"></i>
                </button>
                <div class="note-actions">
                    <button class="btn-action" (click)="$event.stopPropagation(); openEditModal(note)" title="Edit">
                        <i class="bi bi-pencil"></i>
                    </button>
                    <button class="btn-action btn-danger" (click)="$event.stopPropagation(); deleteNote(note.id)" title="Delete">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
                <div class="note-body" (click)="openEditModal(note)">
                    <h3 class="note-title">{{ note.title }}</h3>
                    <div class="note-content" [innerHTML]="note.content"></div>
                </div>
                <div class="note-meta">
                    <i class="bi bi-clock"></i> {{ note.updated | date:'short' }}
                </div>
            </div> } @empty { <div class="empty-state">
                <i class="bi bi-journal-x"></i>
                <h3>No notes yet</h3>
                <p>Create your first note to get started</p>
                <button class="btn btn-primary" (click)="openCreateModal()">
                    <i class="bi bi-plus-lg"></i> Create Note </button>
            </div> } </div>
    </main>
    <!-- Modal --> @if (showModal) { <div class="modal-overlay" (click)="closeModal()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h2>{{ editingNote ? 'Edit Note' : 'New Note' }}</h2>
                <button class="btn-close" (click)="closeModal()">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <form (ngSubmit)="saveNote()" class="modal-body">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input id="title" type="text" class="form-control" [(ngModel)]="formData.title" name="title" required placeholder="Enter note title">
                </div>
                <div class="form-group">
                    <label for="content">Content</label>
                    <textarea id="content" class="form-control" [(ngModel)]="formData.content" name="content" rows="8" placeholder="Write your note..."></textarea>
                </div>
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" [(ngModel)]="formData.isMarked" name="isMarked">
                        <span class="checkbox-text">
                            <i class="bi bi-star-fill"></i> Mark as important </span>
                    </label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Note</button>
                </div>
            </form>
        </div>
    </div> }
</div>